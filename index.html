<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>National Saleha Day</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #ffe6f0;
      color: #d63384;
      text-align: center;
    }

    #password-screen, #main-content, .section {
      display: none;
      padding: 20px;
    }

    #password-screen {
      display: block;
    }

    button {
      padding: 10px 20px;
      font-size: 1em;
      margin: 10px;
      border: none;
      border-radius: 10px;
      background-color: #ff69b4;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #ff85c1;
    }

    input[type="password"] {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ff69b4;
    }

    iframe {
      width: 90%;
      max-width: 600px;
      margin-top: 20px;
      border-radius: 12px;
    }

    h1, h2 {
      color: #d63384;
    }

    p, em {
      color: #cc2e78;
    }

    .heart-container {
      position: relative;
      max-width: 600px;
      margin: 0 auto;
    }

    .section {
      padding: 40px 20px;
      text-align: center;
    }

    .section h2 {
      color: #d63384;
      font-size: 28px;
      margin-bottom: 15px;
      font-weight: bold;
    }

    .section p {
      color: #cc2e78;
      font-size: 16px;
      margin-bottom: 20px;
    }

    .heart-group-title {
      color: #ff69b4;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 30px;
    }

    .heart-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-template-rows: repeat(6, 1fr);
      gap: 15px;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      padding: 20px;
    }

    .heart {
      width: 50px;
      height: 50px;
      position: relative;
      cursor: pointer;
      transform-origin: center;
      transition: all 0.3s ease;
      filter: drop-shadow(0 4px 8px rgba(255, 182, 193, 0.3));
    }

    .heart:hover {
      transform: scale(1.2);
      filter: drop-shadow(0 6px 12px rgba(255, 182, 193, 0.5));
    }

    .heart:active {
      transform: scale(1.1);
    }

    .heart::before,
    .heart::after {
      content: '';
      width: 26px;
      height: 40px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%) rotate(-45deg);
      transform-origin: 0 100%;
      border-radius: 50px 50px 0 0;
      transition: all 0.3s ease;
    }

    .heart::before {
      background: var(--heart-color);
    }

    .heart::after {
      left: 31%;
      transform: translateX(-50%) rotate(45deg);
      background: var(--heart-color);
    }

    .favorite-things { --heart-color: #ff9bb3; }
    .why-love { --heart-color: #ff6b9d; }
    .memories { --heart-color: #c44569; }
    .wishes { --heart-color: #f8b500; }

    .heart:nth-child(1) { grid-column: 2; grid-row: 1; }
    .heart:nth-child(2) { grid-column: 3; grid-row: 1; }
    .heart:nth-child(3) { grid-column: 5; grid-row: 1; }
    .heart:nth-child(4) { grid-column: 6; grid-row: 1; }
    
    .heart:nth-child(5) { grid-column: 1; grid-row: 2; }
    .heart:nth-child(6) { grid-column: 2; grid-row: 2; }
    .heart:nth-child(7) { grid-column: 3; grid-row: 2; }
    .heart:nth-child(8) { grid-column: 4; grid-row: 2; }
    .heart:nth-child(9) { grid-column: 5; grid-row: 2; }
    .heart:nth-child(10) { grid-column: 6; grid-row: 2; }
    .heart:nth-child(11) { grid-column: 7; grid-row: 2; }
    
    .heart:nth-child(12) { grid-column: 2; grid-row: 3; }
    .heart:nth-child(13) { grid-column: 3; grid-row: 3; }
    .heart:nth-child(14) { grid-column: 4; grid-row: 3; }
    .heart:nth-child(15) { grid-column: 5; grid-row: 3; }
    .heart:nth-child(16) { grid-column: 6; grid-row: 3; }
    
    .heart:nth-child(17) { grid-column: 3; grid-row: 4; }
    .heart:nth-child(18) { grid-column: 4; grid-row: 4; }
    .heart:nth-child(19) { grid-column: 5; grid-row: 4; }

    .tooltip {
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.95);
      color: #6b4c57;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border: 2px solid #ffb6c1;
    }

    .heart:hover .tooltip {
      opacity: 1;
    }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 182, 193, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: linear-gradient(135deg, #ffffff 0%, #ffeef8 100%);
      padding: 40px;
      border-radius: 30px;
      text-align: center;
      max-width: 400px;
      margin: 20px;
      box-shadow: 0 20px 40px rgba(255, 182, 193, 0.4);
      border: 3px solid #ffb6c1;
      animation: modalPop 0.3s ease;
    }

    @keyframes modalPop {
      0% { transform: scale(0.7); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .modal h2 {
      color: #c44569;
      margin-bottom: 20px;
      font-size: 24px;
      font-weight: bold;
    }

    .modal p {
      color: #6b4c57;
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 30px;
      font-style: italic;
    }

    .close-btn {
      background: linear-gradient(135deg, #ff6b9d, #c44569);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(196, 69, 105, 0.3);
    }

    .close-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(196, 69, 105, 0.4);
    }

    .dino-game-container {
      max-width: 800px;
      width: 100%;
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin: 0 auto;
      box-shadow: 0 8px 25px rgba(255, 105, 180, 0.2);
      border: 2px solid #ff69b4;
      position: relative;
    }

    .dino-game-canvas {
      border: 2px solid #ff69b4;
      border-radius: 10px;
      background: #f0f8ff;
      display: block;
      margin: 0 auto;
      box-shadow: inset 0 2px 8px rgba(255, 105, 180, 0.15);
      max-width: 100%;
      height: auto;
    }

    .dino-game-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
      color: #d63384;
      font-weight: bold;
      font-size: 16px;
    }

    .dino-instructions {
      text-align: center;
      color: #cc2e78;
      margin-top: 15px;
      font-size: 14px;
    }

    .dino-game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.98);
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      border: 3px solid #ff69b4;
      display: none;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      z-index: 10;
    }

    .dino-game-over h3 {
      color: #d63384;
      margin-bottom: 12px;
      font-size: 20px;
    }

    .dino-game-over p {
      color: #cc2e78;
      margin-bottom: 15px;
      font-size: 14px;
    }

    .dino-restart-btn {
      background: linear-gradient(135deg, #ff69b4, #d63384);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .dino-restart-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
    }

    /* Styles for Letters Jar */
    .note-dot {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      margin: 3px;
    }

    #notes-inside {
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: flex-end;
      height: 100%;
      overflow: hidden;
    }

    #jar {
      width: 200px;
      height: 250px;
      margin: 20px auto;
      background: #ffe4e1;
      border: 2px solid #ff69b4;
      border-radius: 0 0 100px 100px / 0 0 50px 50px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    #newNote {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ff69b4;
      width: 300px;
      max-width: 80%;
    }

    #coupons-section {
      max-width: 700px;
      margin: 30px auto;
      text-align: center;
      font-family: 'Arial', sans-serif;
      color: #d63384;
    }
    #coupons-section h2 {
      margin-bottom: 20px;
    }
    .coupon-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
    }
    .coupon-card {
      background: #ff85c1;
      border-radius: 12px;
      padding: 15px 20px;
      box-shadow: 0 3px 8px rgba(246, 63, 127, 0.5);
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease, color 0.3s ease;
      font-weight: 600;
    }
    .coupon-card.redeemed {
      background: #ffd6e8;
      color: #a73572;
      text-decoration: line-through;
      box-shadow: none;
      cursor: default;
    }

    @media (max-width: 768px) {
      .dino-game-canvas {
        width: 100%;
        height: 150px; /* Adjusted for smaller screens */
      }
      
      .dino-game-info {
        font-size: 14px;
      }
      
      .dino-instructions {
        font-size: 12px;
      }

      .heart-grid {
        gap: 10px;
        max-width: 350px;
        padding: 15px;
      }

      .heart {
        width: 35px;
        height: 35px;
      }

      .heart::before,
      .heart::after {
        width: 18px;
        height: 28px;
      }

      .heart::after {
        left: 29%;
      }

      .section h2 {
        font-size: 24px;
      }

      .modal-content {
        padding: 30px 20px;
        margin: 10px;
      }

      .modal h2 {
        font-size: 20px;
      }

      .modal p {
        font-size: 16px;
      }
    }

    @media (max-width: 480px) {
      .heart-grid {
        gap: 8px;
        max-width: 280px;
      }

      .heart {
        width: 28px;
        height: 28px;
      }

      .heart::before,
      .heart::after {
        width: 14px;
        height: 22px;
      }

      .tooltip {
        font-size: 10px;
        padding: 6px 10px;
      }

      .dino-game-canvas {
        width: 100%;
        height: 120px; /* Further adjusted for very small screens */
      }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-5px) scale(1); }
    }
    
    .heart:hover {
      animation-play-state: paused;
    }
  </style>
</head>
<body>

<!-- üîê Password -->
<div id="password-screen">
  <h1>Welcome to National Saleha Day!</h1>
  <p>Enter the secret password:</p>
  <input type="password" id="password-input" />
  <button onclick="checkPassword()">Enter</button>
  <p id="error-msg" style="color: red;"></p>
</div>

<!-- üéâ Main -->
<div id="main-content">
  <h1>Happy National Saleha Day üéâ</h1>
  <div>
    <button onclick="showSection('bday')">üéÇ Birthday Message</button>
    <button onclick="showSection('game')">ü¶ñ Dino Saleha</button>
    <button onclick="showSection('hearts')">‚ù§Ô∏è Pixel Hearts</button>
    <button onclick="showSection('jar')">üíå Letters Jar</button>
    <button onclick="showSection('coupons')">üéüÔ∏è Coupons</button>
  </div>

  <!-- üìπ Birthday Message -->
  <div class="section" id="bday">
    <h2>üéÇ From Me to You</h2>
    <iframe src="https://drive.google.com/file/d/1kbmo3FQIMqr5UqeU4X76FV-zqYJmkVTv/preview" width="640" height="480" allow="autoplay"></iframe>
  </div>

  <!-- ü¶ñ Dino Saleha Game -->
  <div class="section" id="game">
    <h2>ü¶ñ Saleha Dino Adventure ü¶ñ</h2>
    <p>Help Saleha jump over the cacti! üåµüíñ</p>
    
    <div class="dino-game-container">
      <canvas class="dino-game-canvas" id="dinoGameCanvas" width="800" height="200"></canvas>
      
      <div class="dino-game-info">
        <div class="dino-score">Score: <span id="dinoScore">0</span></div>
        <div class="dino-high-score">High Score: <span id="dinoHighScore">0</span></div>
      </div>
      
      <p class="dino-instructions">
        Press SPACEBAR or TAP to jump! üíï
      </p>
      
      <div class="dino-game-over" id="dinoGameOver">
        <h3>Game Over! üíî</h3>
        <p>Saleha ran into a cactus!</p>
        <p>Final Score: <span id="dinoFinalScore">0</span></p>
        <button class="dino-restart-btn" onclick="restartDinoGame()">Play Again üíñ</button>
      </div>
    </div>
  </div>

  <!-- ‚ù§Ô∏è Pixel Heart Grid -->
  <div class="section" id="hearts">
    <h2>‚ù§Ô∏è Saleha's Hearts</h2>
    <p>Click a heart to see why I love you so much üíñ</p>
    <div class="heart-group-title">üíì What I Love Most About Saleha</div>
    <div id="heart-container">
        <div class="heart-grid">
            <!-- My Favorite Things You Do (6 hearts) -->
            <div class="heart favorite-things" data-theme="My Favorite Things You Do" data-message="You comfort me when I get sad asf.">
                <span class="tooltip">My Favorite Things You Do</span>
            </div>
            <div class="heart favorite-things" data-theme="My Favorite Things You Do" data-message="You make me laugh till the point I can't breathe with your lil teasing.">
                <span class="tooltip">My Favorite Things You Do</span>
            </div>
            <div class="heart favorite-things" data-theme="My Favorite Things You Do" data-message=" You ALWAYS remember the little things that matter to me such as how I like Fuzzy Peaches.">
                <span class="tooltip">My Favorite Things You Do</span>
            </div>
            <div class="heart favorite-things" data-theme="My Favorite Things You Do" data-message="Your goodbye hugs after we hang out make everything better cus you are so cute and soft duh.">
                <span class="tooltip">My Favorite Things You Do</span>
            </div>
            <div class="heart favorite-things" data-theme="My Favorite Things You Do" data-message="The way you listen to me with your whole heart whenever I yap about Carti and Bball and Pokemon.">
                <span class="tooltip">My Favorite Things You Do</span>
            </div>
            <div class="heart favorite-things" data-theme="My Favorite Things You Do" data-message="How you send me funny and cute fit check videos + your yapping.">
                <span class="tooltip">My Favorite Things You Do</span>
            </div>

            <!-- Why I Love You (5 hearts) -->
            <div class="heart why-love" data-theme="Why I Love You" data-message="The way you show me and people that you care with your words and actions">
                <span class="tooltip">Why I Love You</span>
            </div>
            <div class="heart why-love" data-theme="Why I Love You" data-message="You make me feel safe and cherished by never telling people my secrets or judging me.">
                <span class="tooltip">Why I Love You</span>
            </div>
            <div class="heart why-love" data-theme="Why I Love You" data-message="Your smile lights up my entire world as you do your little giggle and show your pretty teeth.">
                <span class="tooltip">Why I Love You</span>
            </div>
            <div class="heart why-love" data-theme="Why I Love You" data-message="You believe in me even when I don't believe in myself during school and things I want to accomplish (basketball).">
                <span class="tooltip">Why I Love You</span>
            </div>
            <div class="heart why-love" data-theme="Why I Love You" data-message="Your heart is pure and beautiful as you pray your best, worship your best and teach me and motivate me to be a better human and Muslim.">
                <span class="tooltip">Why I Love You</span>
            </div>

            <!-- My Favorite Memories (4 hearts) -->
            <div class="heart memories" data-theme="My Favorite Memories" data-message="Every single Delpark 'study' session (we just yap).">
                <span class="tooltip">My Favorite Memories</span>
            </div>
            <div class="heart memories" data-theme="My Favorite Memories" data-message="When we play basketball at Seneca where we spent talking for hours.">
                <span class="tooltip">My Favorite Memories</span>
            </div>
            <div class="heart memories" data-theme="My Favorite Memories" data-message="The day you FINALLY told me 'yes' to be with you forever after 638463846 tries! ">
                <span class="tooltip">My Favorite Memories</span>
            </div>
            <div class="heart memories" data-theme="My Favorite Memories" data-message="Game nights on Roblox where I beat your ass in UNO!">
                <span class="tooltip">My Favorite Memories</span>
            </div>

            <!-- Wishes for Us (4 hearts) -->
            <div class="heart wishes" data-theme="Wishes for Us" data-message="May we always find reasons to laugh together.">
                <span class="tooltip">Wishes for Us</span>
            </div>
            <div class="heart wishes" data-theme="Wishes for Us" data-message="I hope we grow old together, hand in hand.">
                <span class="tooltip">Wishes for Us</span>
            </div>
            <div class="heart wishes" data-theme="Wishes for Us" data-message="May our love be forever.">
                <span class="tooltip">Wishes for Us</span>
            </div>
            <div class="heart wishes" data-theme="Wishes for Us" data-message="May we always find joy in the little moments.">
                <span class="tooltip">Wishes for Us</span>
            </div> <!-- Added missing heart -->
        </div>
    </div>
  </div>

  <!-- üíå Letters Jar Section -->
  <div class="section" id="jar">
    <h2>üíå Saleha's Love Notes Jar</h2>
    <p>Click the jar to pull a random love note! Or add your own. üíñ</p>
    <div id="jar">
      <div id="notes-inside"></div>
    </div>
    <p id="countText"></p>
    <button id="pullBtn">Pull a Note</button>
    <div style="margin-top:20px;">
      <input id="newNote" type="text" placeholder="Add a new note...">
      <button id="addNoteBtn">Add Note</button>
    </div>
    <button id="clearNotesBtn">Reset Jar</button>
  </div>

  <!-- üéüÔ∏è Coupons Section -->
  <div class="section" id="coupons">
    <h2>üéüÔ∏è Coupons for Saleha</h2>
    <p>Click a coupon to redeem it üíñ</p>
    <div class="coupon-list" id="couponList"></div>
  </div>
</div>

<!-- Modal for Hearts -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h2 id="modal-title"></h2>
    <p id="modal-message"></p>
    <button class="close-btn" onclick="closeModal()">Close ‚ù§Ô∏è</button>
  </div>
</div>

<!-- Popup for Notes Jar -->
<div id="notePopup" style="display:none; position:fixed; z-index:1001; left:0; top:0; width:100%; height:100%; background:rgba(255,182,193,0.8); display:flex; align-items:center; justify-content:center;">
  <div style="background:linear-gradient(135deg, #ffffff 0%, #ffeef8 100%); padding:40px; border-radius:30px; max-width:400px; text-align:center; box-shadow:0 20px 40px rgba(255,182,193,0.4); border:3px solid #ffb6c1;">
    <p id="popupContent" style="color:#6b4c57; font-size:18px; line-height:1.6; margin-bottom:30px; font-style:italic;"></p>
    <button id="closePopup" style="background:linear-gradient(135deg, #ff6b9d, #c44569); color:white; border:none; padding:12px 24px; border-radius:25px; cursor:pointer; font-size:16px; font-weight:bold;">Close ‚ù§Ô∏è</button>
  </div>
</div>

<script>
  const PASSWORD = "nationalsalehaday";

  function checkPassword() {
    const input = document.getElementById("password-input").value;
    if (input === PASSWORD) {
      document.getElementById("password-screen").style.display = "none";
      document.getElementById("main-content").style.display = "block";
    } else {
      document.getElementById("error-msg").innerText = "Wrong password!";
    }
  }

  // Add Enter key support for password input
  document.getElementById("password-input").addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      checkPassword();
    }
  });

  function showSection(id) {
    document.querySelectorAll(".section").forEach((sec) => sec.style.display = "none");
    document.getElementById(id).style.display = "block";
    
    // Initialize dino game immediately when game section is shown
    if (id === "game") {
      initDinoGame();
    }
  }

  // Close modal function
  function closeModal() {
    document.getElementById("modal").classList.remove("active");
    // Return focus to the triggering element for accessibility
    document.activeElement.blur();
  }

  // Close modal when clicking outside
  document.getElementById("modal").addEventListener("click", function(e) {
    if (e.target === this) {
      closeModal();
    }
  });

  // Close modal with Escape key and trap focus
  document.addEventListener("keydown", function(e) {
    if (e.key === "Escape" && document.getElementById("modal").classList.contains("active")) {
      closeModal();
    }
  });

  // Trap focus within modal
  document.getElementById("modal").addEventListener("keydown", function(e) {
    if (e.key === "Tab") {
      const focusable = document.querySelectorAll(".modal-content button")[0];
      focusable.focus();
      e.preventDefault();
    }
  });

  // Heart functionality - wait for DOM to load
  document.addEventListener("DOMContentLoaded", function() {
    // Enhanced Heart click functionality
    document.querySelectorAll(".heart").forEach(heart => {
      heart.addEventListener("click", function() {
        const theme = this.getAttribute("data-theme");
        const message = this.getAttribute("data-message");
        
        document.getElementById("modal-title").textContent = theme;
        document.getElementById("modal-message").textContent = message;
        document.getElementById("modal").classList.add("active");
        // Focus the close button for accessibility
        document.querySelector(".close-btn").focus();
      });
    });

    // Optimize heart animations by staggering and reducing CPU load
    document.querySelectorAll(".heart").forEach((heart, index) => {
      heart.style.animationDelay = `${index * 0.2}s`; // Increased delay for smoother performance
      heart.style.animation = `float 4s ease-in-out infinite`; // Slower animation for less CPU usage
    });
  });

  // DINO GAME CODE
  let dinoGameInitialized = false;
  let gameAnimationId = null;

  function initDinoGame() {
    if (dinoGameInitialized) return;
    dinoGameInitialized = true;

    const canvas = document.getElementById("dinoGameCanvas");
    const ctx = canvas.getContext("2d");

    // Adjust canvas size for smaller screens
    if (window.innerWidth < 768) {
      canvas.width = Math.min(600, window.innerWidth - 40);
      canvas.height = 150;
    } else {
      canvas.width = 800;
      canvas.height = 200;
    }

    // Load Saleha's image with fallback
    const salehaImage = new Image();
    salehaImage.crossOrigin = "anonymous";
    salehaImage.src = "https://drive.google.com/uc?export=view&id=10Eb2sSGGpD3Gl6cbJl0gKVY8ygvsLbPe";
    let imageLoaded = false;

    salehaImage.onload = function() {
      imageLoaded = true;
      console.log("Saleha image loaded successfully!");
    };

    salehaImage.onerror = function() {
      console.log("Failed to load Saleha image, using fallback");
      imageLoaded = false;
    };

    // Game variables
    let gameRunning = true;
    let dinoScore = 0;
    let dinoHighScore = parseInt(localStorage.getItem("salehaHighScore")) || 0;
    let gameSpeed = 5;
    let frameCount = 0;
    let obstacles = [];

    // Update high score display
    document.getElementById("dinoHighScore").textContent = dinoHighScore;

    // Saleha (player) object
    const saleha = {
      x: 50,
      y: 150,
      width: 40,
      height: 40,
      velY: 0,
      jumping: false,
      grounded: true
    };

    // Ground
    const ground = {
      x: 0,
      y: canvas.height - 20,
      width: canvas.width,
      height: 20
    };

    // Draw Saleha character with her actual photo
    function drawSaleha() {
      ctx.save();
      
      if (imageLoaded && salehaImage.complete) {
        ctx.beginPath();
        ctx.arc(saleha.x + 20, saleha.y + 20, 20, 0, Math.PI * 2);
        ctx.closePath();
        ctx.clip();
        
        ctx.drawImage(salehaImage, saleha.x, saleha.y, 40, 40);
        
        ctx.restore();
        ctx.save();
        
        ctx.strokeStyle = "#ff69b4";
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.arc(saleha.x + 20, saleha.y + 20, 20, 0, Math.PI * 2);
        ctx.stroke();
        
        if (saleha.jumping) {
          ctx.fillStyle = "#ff1493";
          ctx.font = "16px Arial";
          ctx.fillText("üíñ", saleha.x + 15, saleha.y - 5);
        }
      } else {
        ctx.fillStyle = "#ffdbac";
        ctx.beginPath();
        ctx.arc(saleha.x + 20, saleha.y + 15, 18, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = "#8b4513";
        ctx.beginPath();
        ctx.arc(saleha.x + 20, saleha.y + 10, 20, Math.PI, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = "#000";
        ctx.beginPath();
        ctx.arc(saleha.x + 15, saleha.y + 12, 2, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(saleha.x + 25, saleha.y + 12, 2, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(saleha.x + 20, saleha.y + 18, 6, 0, Math.PI);
        ctx.stroke();
        
        ctx.fillStyle = "#ff69b4";
        ctx.fillRect(saleha.x + 12, saleha.y + 25, 16, 15);
      }
      
      ctx.restore();
    }

    function createObstacle() {
      obstacles.push({
        x: canvas.width,
        y: ground.y - 30,
        width: 20,
        height: 30
      });
    }

    function drawObstacle(obs) {
      ctx.fillStyle = "#228B22";
      ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
      
      ctx.fillRect(obs.x - 5, obs.y + 8, 8, 3);
      ctx.fillRect(obs.x + obs.width - 3, obs.y + 15, 8, 3);
    }

    function drawGround() {
      ctx.fillStyle = "#DEB887";
      ctx.fillRect(ground.x, ground.y, ground.width, ground.height);
      
      ctx.fillStyle = "#CD853F";
      for (let i = 0; i < canvas.width; i += 20) {
        ctx.fillRect(i, ground.y + 5, 10, 2);
      }
    }

    function drawClouds() {
      ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
      
      const cloudX = (frameCount * 0.5) % (canvas.width + 100) - 100;
      
      ctx.beginPath();
      ctx.arc(cloudX, 40, 15, 0, Math.PI * 2);
      ctx.arc(cloudX + 20, 40, 20, 0, Math.PI * 2);
      ctx.arc(cloudX + 40, 40, 15, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.beginPath();
      ctx.arc(cloudX + 200, 60, 12, 0, Math.PI * 2);
      ctx.arc(cloudX + 215, 60, 15, 0, Math.PI * 2);
      ctx.arc(cloudX + 230, 60, 12, 0, Math.PI * 2);
      ctx.fill();
    }

    function checkCollision(rect1, rect2) {
      return rect1.x < rect2.x + rect2.width &&
             rect1.x + rect1.width > rect2.x &&
             rect1.y < rect2.y + rect2.height &&
             rect1.y + rect1.height > rect2.y;
    }

    function update() {
      if (!gameRunning) return;
      
      frameCount++;
      dinoScore = Math.floor(frameCount / 10);
      document.getElementById("dinoScore").textContent = dinoScore;
      
      gameSpeed = 5 + dinoScore * 0.05;

      // Saleha physics
      if (saleha.jumping) {
        saleha.velY += 0.8; // gravity
        saleha.y += saleha.velY;
        
        if (saleha.y >= ground.y - saleha.height) {
          saleha.y = ground.y - saleha.height;
          saleha.jumping = false;
          saleha.grounded = true;
          saleha.velY = 0;
        }
      }
      
      // Create obstacles
      if (frameCount % 120 === 0) {
        createObstacle();
      }
      
      // Move obstacles
      obstacles.forEach((obs, index) => {
        obs.x -= gameSpeed;
        
        if (obs.x + obs.width < 0) {
          obstacles.splice(index, 1);
        }
        
        // Collision check
        if (checkCollision(saleha, obs)) {
          gameOver();
        }
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, "#87CEEB");
      gradient.addColorStop(1, "#E0F6FF");
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      drawClouds();
      drawGround();
      drawSaleha();
      
      obstacles.forEach(drawObstacle);
    }

    function gameLoop() {
      update();
      draw();
      
      if (gameRunning) {
        gameAnimationId = requestAnimationFrame(gameLoop);
      }
    }

    function gameOver() {
      gameRunning = false;
      
      if (dinoScore > dinoHighScore) {
        dinoHighScore = dinoScore;
        localStorage.setItem("salehaHighScore", dinoHighScore);
        document.getElementById("dinoHighScore").textContent = dinoHighScore;
      }
      
      document.getElementById("dinoFinalScore").textContent = dinoScore;
      document.getElementById("dinoGameOver").style.display = "block";
      
      if (gameAnimationId) {
        cancelAnimationFrame(gameAnimationId);
      }
    }

    function jump() {
      if (saleha.grounded && gameRunning) {
        saleha.jumping = true;
        saleha.grounded = false;
        saleha.velY = -15;
      }
    }

    // Event listeners
    document.addEventListener("keydown", function(e) {
      if (e.code === "Space" || e.key === " ") {
        e.preventDefault();
        jump();
      }
    });

    canvas.addEventListener("click", jump);
    canvas.addEventListener("touchstart", function(e) {
      e.preventDefault();
      jump();
    });

    // Start the game
    gameLoop();
  }

  function restartDinoGame() {
    document.getElementById("dinoGameOver").style.display = "none";
    dinoGameInitialized = false;
    if (gameAnimationId) {
      cancelAnimationFrame(gameAnimationId);
    }
    // Reset game state
    initDinoGame();
  }
</script>

<script>
  const STORAGE_KEY = "saleha_letters_jar_v1";
  const defaultNotes = [
    "you are forever my pretty dumpling",
    "i love you even when you overthink",
    "you are my best friend",
    "i will forever chresh you",
    "sometimes ig you are OKAY at uno",
    "sometimes ig you are OKAY at 8 ball",
    "you SUCK at watermelon go (jk you are actually really smart and good)",
    "you are a GENIUS my love",
    "you are my favorite human",
    "your face >>>",
    "your smile >>>",
    "i love you more than calc",
    "your laugh is so contagious my cutie",
    "i‚Äôm keeping you forever DUH",
    "sometimes i wonder how i got so lucky (then i remember i‚Äôm HIM )",
    "you are literally the main character in my head",
    "you are my comfort person",
    "you are my safe place",
    "u make every boring day stupidly fun",
    "if we were in a video game, you‚Äôd be my favorite pokemon",
    "your texts make my day go from bruh to IEFBABUFEFAF SHES SO PRETTY in 0.00003 seconds",
    "you smell like home to me",
    "you make pink look jealous of you",
    "you‚Äôre the wifi to my heart, no connection without you"
  ];

  function loadNotes() {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (!raw) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(defaultNotes));
      return [...defaultNotes];
    }
    try {
      return JSON.parse(raw);
    } catch {
      return [...defaultNotes];
    }
  }

  function saveNotes(arr) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    renderNotesDots();
  }

  function renderNotesDots() {
    const notes = loadNotes();
    const container = document.getElementById("notes-inside");
    container.innerHTML = "";
    notes.slice(0, 20).forEach((n,i) => {
      const dot = document.createElement("div");
      dot.className = "note-dot";
      const colors = ["#ff87c1","#ff5fa1","#ffd1e6","#ffc0db","#ff9ccf","#ffd6e8"];
      dot.style.background = colors[i % colors.length];
      container.appendChild(dot);
    });
    document.getElementById("countText").innerText = `${notes.length} note${notes.length===1?"":"s"} in the jar`;
  }

  function pullRandomNote() {
    const notes = loadNotes();
    if (!notes.length) {
      showPopup("The jar is empty. Add a note!");
      return;
    }
    const idx = Math.floor(Math.random()*notes.length);
    const note = notes[idx];
    showPopup(note);
  }

  function showPopup(text) {
    const popup = document.getElementById("notePopup");
    document.getElementById("popupContent").innerText = text;
    popup.style.display = "flex";
    popup.setAttribute("aria-hidden","false");
  }

  function hidePopup() {
    const popup = document.getElementById("notePopup");
    popup.style.display = "none";
    popup.setAttribute("aria-hidden","true");
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderNotesDots();
    document.getElementById("jar").addEventListener("click", pullRandomNote);
    document.getElementById("pullBtn").addEventListener("click", pullRandomNote);
    document.getElementById("addNoteBtn").addEventListener("click", () => {
      const text = document.getElementById("newNote").value.trim();
      if (!text) return alert("Write a short note first.");
      const notes = loadNotes();
      notes.unshift(text);
      saveNotes(notes);
      document.getElementById("newNote").value = "";
      showPopup("Added! Pull the jar to see it.");
    });
    document.getElementById("clearNotesBtn").addEventListener("click", () => {
      if (!confirm("Reset the jar? This will delete all saved notes in this browser.")) return;
      localStorage.removeItem(STORAGE_KEY);
      renderNotesDots();
      showPopup("Jar reset. I added some starter notes for you.");
    });
    document.getElementById("closePopup").addEventListener("click", hidePopup);
    window.addEventListener("click", (e) => {
      const popup = document.getElementById("notePopup");
      if (popup.style.display === "flex" && !popup.contains(e.target) && !document.getElementById("jar").contains(e.target)) {
        hidePopup();
      }
    });
  });
</script>

<script>
  const COUPON_STORAGE_KEY = 'saleha_coupons_redeemed_v1';

  const coupons = [
    "Ahnaf has to sing any song you want üé§",
    "Ahnaf has to play any game you want üéÆ",
    "Ahnaf gives you a 10-minute forehead massage üíÜ‚Äç‚ôÄÔ∏è",
    "Ahnaf writes you a mini poem ‚úçÔ∏è",
    "Ahnaf owes you a 'Yes Hour' ‚úÖ",
    "Ahnaf must compliment you 10 times in a row üíñ",
    "Ahnaf makes you laugh until you snort üòÇ",
    "Ahnaf gives you a shoulder massage üíÜ",
    "Ahnaf draws a doodle of you üé®",
    "Ahnaf tells you 5 reasons he loves you üíå",
    "Ahnaf lets you steal his hoodie üß•",
    "Ahnaf plays Roblox with you for 2 hours straight üéÆ",
    "Ahnaf calls you 10 cute nicknames in one go ü•∫",
    "Ahnaf dances for you üíÉ",
    "Ahnaf learns a TikTok dance with you üì±",
    "Ahnaf writes you a love letter üíå",
    "Ahnaf plays your favorite playlist all day üé∂",
    "Ahnaf wears matching outfits with you üëï",
    "Ahnaf takes aesthetic pics of you üì∏",
    "Ahnaf watches your favorite show with you üì∫",
    "Ahnaf lets you paint his nails üíÖ",
    "Ahnaf listens to your rant with no interruptions üòå",
    "Ahnaf makes a paper origami heart for you ‚ù§Ô∏è",
    "Ahnaf pretends to be your butler for an hour üõéÔ∏è",
    "Ahnaf makes a funny video just for you üìπ",
    "Ahnaf hugs you for 5 minutes straight ü§ó",
    "Ahnaf draws a heart on his hand for you üñ§",
    "Ahnaf sings you to sleep üåô",
    "Ahnaf plays your favorite childhood game with you üïπÔ∏è",
    "Ahnaf calls you a hundred cute nicknames in one day ü•∫",
    "Ahnaf lets you style his hair üíá‚Äç‚ôÇÔ∏è",
    "Ahnaf writes your name 50 times in different styles ‚úíÔ∏è",
    "Ahnaf lets you choose his outfit for a day üëî",
    "Ahnaf learns something new just for you üí°",
    "Ahnaf gives you a 'no phone' hour to be fully present üìµ",
    "Ahnaf makes a surprise note for you üìÑ",
    "Ahnaf sends you a 30-second voice note saying why you're perfect üé§",
    "Ahnaf sends you a funny meme he made for you üòÇ",
    "Ahnaf writes you a haiku about your beauty üå∏",
    "Ahnaf sends you a '5 things I miss about you' text üí¨",
    "Ahnaf sends a selfie with a heart drawn on his cheek ‚ù§Ô∏è",
    "Ahnaf gives you a virtual 'pinky promise' ü§û",
    "Ahnaf sends a 'just because' good morning text üåÖ",
    "Ahnaf sends a 'just because' good night text üåô",
    "Ahnaf writes your name in bubble letters üé®",
    "Ahnaf draws a cartoon version of you üñåÔ∏è",
    "Ahnaf writes 'I love you' in 10 languages üåç",
    "Ahnaf sends you a list of 10 random things he likes about you üìù",
    "Ahnaf makes you a 'playlist' by sending song links üéß",
    "Ahnaf makes a 15-second video saying why you‚Äôre the best üíñ"
  ];

  function loadRedeemed() {
    const raw = localStorage.getItem(COUPON_STORAGE_KEY);
    if (!raw) return {};
    try {
      return JSON.parse(raw);
    } catch {
      return {};
    }
  }

  function saveRedeemed(data) {
    localStorage.setItem(COUPON_STORAGE_KEY, JSON.stringify(data));
  }

  function toggleRedeem(index, el) {
    const redeemed = loadRedeemed();
    if (redeemed[index]) {
      // unredeem (optional)
      redeemed[index] = false;
      el.classList.remove('redeemed');
      el.innerText = coupons[index];
    } else {
      redeemed[index] = true;
      el.classList.add('redeemed');
      el.innerText = "Redeemed üíñ";
    }
    saveRedeemed(redeemed);
  }

  function renderCoupons() {
    const container = document.getElementById('couponList');
    container.innerHTML = '';
    const redeemed = loadRedeemed();
    coupons.forEach((text, i) => {
      const card = document.createElement('div');
      card.className = 'coupon-card';
      if (redeemed[i]) {
        card.classList.add('redeemed');
        card.innerText = "Redeemed üíñ";
      } else {
        card.innerText = text;
      }
      card.addEventListener('click', () => toggleRedeem(i, card));
      container.appendChild(card);
    });
  }

  document.addEventListener('DOMContentLoaded', renderCoupons);
</script>
</body>
</html>
